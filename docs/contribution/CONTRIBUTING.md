# ç¤¾åŒºè„šæœ¬è´¡çŒ®æŒ‡å—

## **æ¬¢è¿æ¥åˆ° community-scripts ä»“åº“ï¼**

ğŸ“œ è¿™äº›æ–‡æ¡£æ¦‚è¿°äº†æˆ‘ä»¬æ‰€æœ‰è„šæœ¬å’Œ JSON æ–‡ä»¶çš„åŸºæœ¬ç¼–ç æ ‡å‡†ã€‚éµå®ˆè¿™äº›æ ‡å‡†å¯ç¡®ä¿æˆ‘ä»¬çš„ä»£ç åº“ä¿æŒä¸€è‡´ã€å¯è¯»å’Œå¯ç»´æŠ¤ã€‚é€šè¿‡éµå¾ªè¿™äº›æŒ‡å—ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹å–„åä½œã€å‡å°‘é”™è¯¯å¹¶æé«˜é¡¹ç›®çš„æ•´ä½“è´¨é‡ã€‚

### ä¸ºä»€ä¹ˆç¼–ç æ ‡å‡†å¾ˆé‡è¦

ç¼–ç æ ‡å‡†è‡³å…³é‡è¦ï¼ŒåŸå› å¦‚ä¸‹ï¼š

1. **ä¸€è‡´æ€§**ï¼šä¸€è‡´çš„ä»£ç æ›´æ˜“äºé˜…è¯»ã€ç†è§£å’Œç»´æŠ¤ã€‚å®ƒå¸®åŠ©æ–°å›¢é˜Ÿæˆå‘˜å¿«é€Ÿä¸Šæ‰‹å¹¶å‡å°‘å­¦ä¹ æ›²çº¿ã€‚
2. **å¯è¯»æ€§**ï¼šæ¸…æ™°ä¸”ç»“æ„è‰¯å¥½çš„ä»£ç æ›´æ˜“äºè°ƒè¯•å’Œæ‰©å±•ã€‚å®ƒå…è®¸å¼€å‘äººå‘˜å¿«é€Ÿè¯†åˆ«å’Œä¿®å¤é—®é¢˜ã€‚
3. **å¯ç»´æŠ¤æ€§**ï¼šéµå¾ªæ ‡å‡†ç»“æ„çš„ä»£ç æ›´æ˜“äºé‡æ„å’Œæ›´æ–°ã€‚å®ƒç¡®ä¿å¯ä»¥ä»¥æœ€å°çš„å¼•å…¥æ–°é”™è¯¯çš„é£é™©è¿›è¡Œæ›´æ”¹ã€‚
4. **åä½œ**ï¼šå½“æ¯ä¸ªäººéƒ½éµå¾ªç›¸åŒçš„æ ‡å‡†æ—¶ï¼Œåä½œä»£ç å˜å¾—æ›´å®¹æ˜“ã€‚å®ƒå‡å°‘äº†ä»£ç å®¡æŸ¥å’Œåˆå¹¶æœŸé—´çš„æ‘©æ“¦å’Œè¯¯è§£ã€‚

### è¿™äº›æ–‡æ¡£çš„èŒƒå›´

è¿™äº›æ–‡æ¡£æ¶µç›–äº†æˆ‘ä»¬é¡¹ç›®ä¸­ä»¥ä¸‹ç±»å‹æ–‡ä»¶çš„ç¼–ç æ ‡å‡†ï¼š

- **`install/$AppName-install.sh` è„šæœ¬**ï¼šè¿™äº›è„šæœ¬è´Ÿè´£åº”ç”¨ç¨‹åºçš„å®‰è£…ã€‚
- **`ct/$AppName.sh` è„šæœ¬**ï¼šè¿™äº›è„šæœ¬å¤„ç†å®¹å™¨çš„åˆ›å»ºå’Œæ›´æ–°ã€‚
- **`json/$AppName.json`**ï¼šè¿™äº›æ–‡ä»¶å­˜å‚¨ç»“æ„åŒ–æ•°æ®å¹¶ç”¨äºç½‘ç«™ã€‚

æ¯ä¸ªéƒ¨åˆ†æä¾›äº†å…³äºç¼–ç å„ä¸ªæ–¹é¢çš„è¯¦ç»†æŒ‡å—ï¼ŒåŒ…æ‹¬ shebang ä½¿ç”¨ã€æ³¨é‡Šã€å˜é‡å‘½åã€å‡½æ•°å‘½åã€ç¼©è¿›ã€é”™è¯¯å¤„ç†ã€å‘½ä»¤æ›¿æ¢ã€å¼•ç”¨ã€è„šæœ¬ç»“æ„å’Œæ—¥å¿—è®°å½•ã€‚æ­¤å¤–ï¼Œè¿˜æä¾›äº†ç¤ºä¾‹æ¥è¯´æ˜è¿™äº›æ ‡å‡†çš„åº”ç”¨ã€‚

é€šè¿‡éµå¾ªæœ¬æ–‡æ¡£ä¸­æ¦‚è¿°çš„ç¼–ç æ ‡å‡†ï¼Œæˆ‘ä»¬ç¡®ä¿æˆ‘ä»¬çš„è„šæœ¬å’Œ JSON æ–‡ä»¶å…·æœ‰é«˜è´¨é‡ï¼Œä½¿æˆ‘ä»¬çš„é¡¹ç›®æ›´åŠ å¥å£®ä¸”æ›´æ˜“äºç®¡ç†ã€‚æ¯å½“æ‚¨åˆ›å»ºæˆ–æ›´æ–°è„šæœ¬å’Œ JSON æ–‡ä»¶æ—¶ï¼Œè¯·å‚è€ƒæœ¬æŒ‡å—ï¼Œä»¥åœ¨æ•´ä¸ªé¡¹ç›®ä¸­ä¿æŒé«˜æ ‡å‡†çš„ä»£ç è´¨é‡ã€‚ğŸ“šğŸ”

è®©æˆ‘ä»¬å…±åŒåŠªåŠ›ï¼Œä¿æŒæˆ‘ä»¬çš„ä»£ç åº“å¹²å‡€ã€é«˜æ•ˆå’Œå¯ç»´æŠ¤ï¼ğŸ’ªğŸš€

## å…¥é—¨

åœ¨è´¡çŒ®ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨å·²å®Œæˆä»¥ä¸‹è®¾ç½®ï¼š

1. **Visual Studio Code**ï¼ˆæ¨èç”¨äºè„šæœ¬å¼€å‘ï¼‰
2. **æ¨èçš„ VS Code æ‰©å±•ï¼š**
   - [Shell Syntax](https://marketplace.visualstudio.com/items?itemName=bmalehorn.shell-syntax)
   - [ShellCheck](https://marketplace.visualstudio.com/items?itemName=timonwong.shellcheck)
   - [Shell Format](https://marketplace.visualstudio.com/items?itemName=foxundermoon.shell-format)

### é‡è¦è¯´æ˜

- åˆ›å»ºæ–°è„šæœ¬æ—¶ä½¿ç”¨ [AppName.sh](https://github.com/jiege6-66/ProxmoxVE/blob/main/docs/contribution/templates_ct/AppName.sh) å’Œ [AppName-install.sh](https://github.com/jiege6-66/ProxmoxVE/blob/main/docs/contribution/templates_install/AppName-install.sh) ä½œä¸ºæ¨¡æ¿ã€‚

---

# ğŸš€ åº”ç”¨ç¨‹åºè„šæœ¬ï¼ˆct/AppName.shï¼‰

- æ‚¨å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/jiege6-66/ProxmoxVE/blob/main/docs/contribution/templates_ct/AppName.md)æ‰¾åˆ°æ­¤æ–‡ä»¶çš„æ‰€æœ‰ç¼–ç æ ‡å‡†ä»¥åŠç»“æ„ã€‚
- è¿™äº›è„šæœ¬è´Ÿè´£å®¹å™¨åˆ›å»ºã€è®¾ç½®å¿…è¦çš„å˜é‡ä»¥åŠåœ¨å®‰è£…åå¤„ç†åº”ç”¨ç¨‹åºçš„æ›´æ–°ã€‚

---

# ğŸ›  å®‰è£…è„šæœ¬ï¼ˆinstall/AppName-install.shï¼‰

- æ‚¨å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/jiege6-66/ProxmoxVE/blob/main/docs/contribution/templates_install/AppName-install.md)æ‰¾åˆ°æ­¤æ–‡ä»¶çš„æ‰€æœ‰ç¼–ç æ ‡å‡†ä»¥åŠç»“æ„ã€‚
- è¿™äº›è„šæœ¬è´Ÿè´£åº”ç”¨ç¨‹åºçš„å®‰è£…ã€‚

---

## ğŸš€ æ„å»ºæ‚¨è‡ªå·±çš„è„šæœ¬

ä»[æ¨¡æ¿è„šæœ¬](https://github.com/jiege6-66/ProxmoxVE/blob/main/docs/contribution/templates_install/AppName-install.sh)å¼€å§‹

---

## ğŸ¤ è´¡çŒ®æµç¨‹

### 1. åˆ†å‰ä»“åº“

åˆ†å‰åˆ°æ‚¨çš„ GitHub è´¦æˆ·

### 2. åœ¨æœ¬åœ°ç¯å¢ƒå…‹éš†æ‚¨çš„åˆ†æ”¯

```bash
git clone https://github.com/yourUserName/ForkName
```

### 3. åˆ›å»ºæ–°åˆ†æ”¯

```bash
git switch -c your-feature-branch
```

### 4. è¿è¡Œ setup-fork.sh è‡ªåŠ¨é…ç½®æ‚¨çš„åˆ†æ”¯

```bash
bash docs/contribution/setup-fork.sh --full
```

æ­¤è„šæœ¬è‡ªåŠ¨ï¼š

- æ£€æµ‹æ‚¨çš„ GitHub ç”¨æˆ·å
- æ›´æ–°æ‰€æœ‰ curl URL æŒ‡å‘æ‚¨çš„åˆ†æ”¯ï¼ˆç”¨äºæµ‹è¯•ï¼‰
- åˆ›å»ºåŒ…å«æ‚¨é…ç½®çš„ `.git-setup-info`
- å¤‡ä»½æ‰€æœ‰ä¿®æ”¹çš„æ–‡ä»¶ï¼ˆ\*.backupï¼‰

**é‡è¦**ï¼šè¿™ä¼šä¿®æ”¹ 600+ ä¸ªæ–‡ä»¶ï¼æäº¤ PR æ—¶ä½¿ç”¨ cherry-pickï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚

### 5. ä»…æäº¤æ‚¨çš„æ–°åº”ç”¨ç¨‹åºæ–‡ä»¶

```bash
git commit -m "Your commit message"
```

### 5. æ¨é€åˆ°æ‚¨çš„åˆ†æ”¯

```bash
git push origin your-feature-branch
```

### 6. Cherry-Pickï¼šä»…æäº¤æ‚¨çš„æ–‡ä»¶ç”¨äº PR

âš ï¸ **é‡è¦**ï¼šsetup-fork.sh ä¿®æ”¹äº† 600+ ä¸ªæ–‡ä»¶ã€‚æ‚¨å¿…é¡»åªæäº¤æ‚¨çš„ 3 ä¸ªæ–°æ–‡ä»¶ï¼

æŸ¥çœ‹ [README.md - Cherry-Pick æŒ‡å—](README.md#-cherry-pick-submitting-only-your-changes) è·å–åˆ†æ­¥è¯´æ˜ã€‚

å¿«é€Ÿç‰ˆæœ¬ï¼š

```bash
# ä»ä¸Šæ¸¸åˆ›å»ºå¹²å‡€çš„åˆ†æ”¯
git fetch upstream
git checkout -b submit/myapp upstream/main

# ä»…å¤åˆ¶æ‚¨çš„æ–‡ä»¶
cp ../your-work-branch/ct/myapp.sh ct/myapp.sh
cp ../your-work-branch/install/myapp-install.sh install/myapp-install.sh
cp ../your-work-branch/frontend/public/json/myapp.json frontend/public/json/myapp.json

# æäº¤å¹¶éªŒè¯
git add ct/myapp.sh install/myapp-install.sh frontend/public/json/myapp.json
git commit -m "feat: add MyApp"
git diff upstream/main --name-only  # åº”è¯¥åªæ˜¾ç¤ºæ‚¨çš„ 3 ä¸ªæ–‡ä»¶

# æ¨é€å¹¶åˆ›å»º PR
git push origin submit/myapp
```

### 7. åˆ›å»º Pull Request

ä» `submit/myapp` â†’ `jiege6-66/ProxmoxVE/main` æ‰“å¼€ Pull Requestã€‚

éªŒè¯ PR ä»…æ˜¾ç¤ºè¿™ 3 ä¸ªæ–‡ä»¶ï¼š

- `ct/myapp.sh`
- `install/myapp-install.sh`
- `frontend/public/json/myapp.json`

---

# ğŸ› ï¸ å¼€å‘è€…æ¨¡å¼å’Œè°ƒè¯•

æ„å»ºæˆ–æµ‹è¯•è„šæœ¬æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `dev_mode` å˜é‡å¯ç”¨å¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ã€‚è¿™äº›æ ‡å¿—å¯ä»¥ç»„åˆä½¿ç”¨ï¼ˆé€—å·åˆ†éš”ï¼‰ã€‚

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# ç¤ºä¾‹ï¼šä½¿ç”¨è·Ÿè¸ªè¿è¡Œå¹¶åœ¨å¤±è´¥æ—¶ä¿ç•™å®¹å™¨
dev_mode="trace,keep" bash -c "$(curl -fsSL https://raw.githubusercontent.com/jiege6-66/ProxmoxVE/main/ct/myapp.sh)"
```

### å¯ç”¨æ ‡å¿—ï¼š

| æ ‡å¿— | æè¿° |
| :--- | :--- |
| `trace` | å¯ç”¨ `set -x` ä»¥åœ¨æ‰§è¡ŒæœŸé—´è·å¾—æœ€å¤§è¯¦ç»†ç¨‹åº¦ã€‚ |
| `keep` | å¦‚æœæ„å»ºå¤±è´¥ï¼Œé˜²æ­¢å®¹å™¨è¢«åˆ é™¤ã€‚ |
| `pause` | åœ¨å…³é”®ç‚¹æš‚åœæ‰§è¡Œï¼ˆä¾‹å¦‚ï¼Œåœ¨è‡ªå®šä¹‰ä¹‹å‰ï¼‰ã€‚ |
| `breakpoint` | å…è®¸è„šæœ¬ä¸­çš„ç¡¬ç¼–ç  `breakpoint` è°ƒç”¨è¿›å…¥ shellã€‚ |
| `logs` | å°†è¯¦ç»†çš„æ„å»ºæ—¥å¿—ä¿å­˜åˆ° `/var/log/community-scripts/`ã€‚ |
| `dryrun` | ç»•è¿‡å®é™…çš„å®¹å™¨åˆ›å»ºï¼ˆæœ‰é™æ”¯æŒï¼‰ã€‚ |
| `motd` | å¼ºåˆ¶æ›´æ–°æ¯æ—¥æ¶ˆæ¯ï¼ˆMOTDï¼‰ã€‚ |

---

## ğŸ“š é¡µé¢

- [CT æ¨¡æ¿ï¼šAppName.sh](https://github.com/jiege6-66/ProxmoxVE/blob/main/docs/contribution/templates_ct/AppName.sh)
- [å®‰è£…æ¨¡æ¿ï¼šAppName-install.sh](https://github.com/jiege6-66/ProxmoxVE/blob/main/docs/contribution/templates_install/AppName-install.sh)
- [JSON æ¨¡æ¿ï¼šAppName.json](https://github.com/jiege6-66/ProxmoxVE/blob/main/docs/contribution/templates_json/AppName.json)
